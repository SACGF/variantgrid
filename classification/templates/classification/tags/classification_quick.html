{% load classification_tags %}
{% load static %}
{% load ui_utils %}
{% load js_tags %}
{% if vcm and vcm.classification.id %}
    {% if show_imported_c_hgvs %}
        <div style="display:inline-block;min-width:400px">
        {% c_hgvs vcm.imported_c_hgvs_obj show_genome_build=True %}
        </div>
    {% endif %}
    {% if mode == "compact" %}
        <a class="hover-link" href="{% url 'view_classification' vcm.classification.id %}">{{ id_text }}</a>
    {% else %}
        <span class="share-level-{{ vcm.share_level_enum.name }} sig-level-{{ vcm.evidence.clinical_significance.value}}">
            {% if mode != "split" %}
                {% if show_values %}{% clinical_significance_values vcm %}{% endif %}
                {% if record_count and record_count != 1 %}
                    x {{ record_count }}
                {% endif %}
            {% endif %}
            <span {% if mode == "split" %}style="display:block;"{% endif %}>
                {% if category_text %}
                    <span style="display:inline-block;margin-bottom:8px;padding-left:8px;padding-right:8px;width:auto" class="testing-context-box testing-context-{{ vcm.classification.allele_origin_bucket }}">{{ category_text }}</span>
                {% endif %}
                <strong>
                    <a class="hover-link" href="{% url 'view_classification' vcm.classification.id %}" {% if not show_id %}title="{{ vcm.cr_lab_id }}"{% endif %}>
                        {% if show_share_level or not vcm.share_level_enum.is_discordant_level %}&nbsp;<img src="{% static vcm.share_level_enum.icon %}" width="12px" height="12px" style="margin-right:4px;" />{% endif %}
                        <span {% if vcm.vc.withdrawn %}style="text-decoration: line-through"{% endif %}>{{ id_text }}</span>
                    </a>
                </strong>
                {% if mode == "split" %}<br/>{% endif %}
                {% if show_condition %}
                    {% if mode != "split" %}- {% endif %}<span style="opacity:0.75">{% condition vcm.condition_resolution_obj_fallback limit=50 no_condition_message=True %}</span>
                {% endif %}
                {% if show_criteria and vcm.classification.summary.criteria_labels %}
                    - <span class="text-monospace text-secondary">{% for crit in vcm.classification.summary.criteria_labels %}{% if not forloop.first %},{% endif %}{{ crit }}{% endfor %}</span>
                {% endif %}
                {% if mode == "split" %}<br/>
                {% else %}: {% endif %}{% if vcm.curated_date_check.name %}<span class="text-secondary">{{ vcm.curated_date_check.name }}</span>{% timestamp vcm.curated_date_check.value time_ago=True tooltip=vcm.curated_date_check.name %}{% endif %}
            </span>
            {% if mode == "split" %}
                <div>
                    {% if show_values %}{% clinical_significance_values vcm %}{% endif %}
                    {% if record_count and record_count != 1 %}
                        x {{ record_count }}
                    {% endif %}
                </div>
            {% endif %}
    {% endif %}
    {% if show_flags %}<div class="flags d-inline-block" style="margin-left:12px; position: relative; bottom: -4px;" data-flags="{{ vcm.classification.flag_collection_id }}">...</div>{% endif %}
</span>
{% else %}
    <span class="share-level-LAB"><span class="cs">DELETED</span> Unknown</span>
{% endif %}