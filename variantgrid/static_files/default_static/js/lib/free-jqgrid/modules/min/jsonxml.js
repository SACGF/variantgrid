!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(n,e)}):"object"==typeof module&&module.exports?module.exports=function(e,n){return e||(e=window),void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n,e)}:t(jQuery,e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var n=this.removeWhite(e),i=this.toObj(n),r=this.toJson(i,e.nodeName,"\t");return"{\n"+t+(t?r.replace(/\t/g,t):r.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var n,i=function(e,t,n){var r,o,l,s,a="";if(e instanceof Array)if(0===e.length)a+=n+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(r=0,o=e.length;r<o;r+=1)a+=n+i(e[r],t,n+"\t")+"\n";else if("object"==typeof e){l=!1,a+=n+"<"+t;for(s in e)e.hasOwnProperty(s)&&("@"===s.charAt(0)?a+=" "+s.substr(1)+'="'+e[s].toString()+'"':l=!0);if(a+=l?">":"/>",l){for(s in e)e.hasOwnProperty(s)&&("#text"===s?a+=e[s]:"#cdata"===s?a+="<![CDATA["+e[s]+"]]>":"@"!==s.charAt(0)&&(a+=i(e[s],s,n+"\t")));a+=("\n"===a.charAt(a.length-1)?n:"")+"</"+t+">"}}else"function"==typeof e?a+=n+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),'""'===e.toString()||0===e.toString().length?a+=n+"<"+t+">__EMPTY_STRING_</"+t+">":a+=n+"<"+t+">"+e.toString()+"</"+t+">");return a},r="";for(n in e)e.hasOwnProperty(n)&&(r+=i(e[n],n,""));return t?r.replace(/\t/g,t):r.replace(/\t|\n/g,"")},toObj:function(t){var n,i,r={},o=/function/i,l=0,s=0,a=!1;if(1===t.nodeType){if(t.attributes.length)for(n=0;n<t.attributes.length;n+=1)r["@"+t.attributes[n].nodeName]=(t.attributes[n].nodeValue||"").toString();if(t.firstChild){for(i=t.firstChild;i;i=i.nextSibling)1===i.nodeType?a=!0:3===i.nodeType&&i.nodeValue.match(/[^ \f\n\r\t\v]/)?l+=1:4===i.nodeType&&(s+=1);if(a)if(l<2&&s<2)for(this.removeWhite(t),i=t.firstChild;i;i=i.nextSibling)3===i.nodeType?r["#text"]=this.escape(i.nodeValue):4===i.nodeType?o.test(i.nodeValue)?r[i.nodeName]=[r[i.nodeName],i.nodeValue]:r["#cdata"]=this.escape(i.nodeValue):r[i.nodeName]?r[i.nodeName]instanceof Array?r[i.nodeName][r[i.nodeName].length]=this.toObj(i):r[i.nodeName]=[r[i.nodeName],this.toObj(i)]:r[i.nodeName]=this.toObj(i);else t.attributes.length?r["#text"]=this.escape(this.innerXml(t)):r=this.escape(this.innerXml(t));else if(l)t.attributes.length?r["#text"]=this.escape(this.innerXml(t)):"__EMPTY_ARRAY_"===(r=this.escape(this.innerXml(t)))?r="[]":"__EMPTY_STRING_"===r&&(r="");else if(s)if(s>1)r=this.escape(this.innerXml(t));else for(i=t.firstChild;i;i=i.nextSibling){if(o.test(t.firstChild.nodeValue)){r=t.firstChild.nodeValue;break}r["#cdata"]=this.escape(i.nodeValue)}}t.attributes.length||t.firstChild||(r=null)}else 9===t.nodeType?r=this.toObj(t.documentElement):(null!=e.jgrid&&null!=e.jgrid.defaults&&e.isFunction(e.jgrid.defaults.fatalError)?e.jgrid.defaults.fatalError:alert)("unhandled node type: "+t.nodeType);return r},toJson:function(e,t,n,i){void 0===i&&(i=!0);var r,o,l,s=t?'"'+t+'"':"",a="\t",d="\n",f=[],u=[];if(i||(a="",d=""),"[]"===e)s+=t?":[]":"[]";else if(e instanceof Array){for(o=0,r=e.length;o<r;o+=1)f[o]=this.toJson(e[o],"",n+a,i);s+=(t?":[":"[")+(f.length>1?d+n+a+f.join(","+d+n+a)+d+n:f.join(""))+"]"}else if(null===e)s+=(t&&":")+"null";else if("object"==typeof e){for(l in e)e.hasOwnProperty(l)&&(u[u.length]=this.toJson(e[l],l,n+a,i));s+=(t?":{":"{")+(u.length>1?d+n+a+u.join(","+d+n+a)+d+n:u.join(""))+"}"}else s+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return s},innerXml:function(e){var t,n="",i=function(e){var t,n,r="";if(1===e.nodeType){for(r+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)r+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(r+=">",n=e.firstChild;n;n=n.nextSibling)r+=i(n);r+="</"+e.nodeName+">"}else r+="/>"}else 3===e.nodeType?r+=e.nodeValue:4===e.nodeType&&(r+="<![CDATA["+e.nodeValue+"]]>");return r};if(e.hasOwnProperty("innerHTML"))n=e.innerHTML;else for(t=e.firstChild;t;t=t.nextSibling)n+=i(t);return n},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,n=e.firstChild;n;)3===n.nodeType?n.nodeValue.match(/[^ \f\n\r\t\v]/)?n=n.nextSibling:(t=n.nextSibling,e.removeChild(n),n=t):1===n.nodeType?(this.removeWhite(n),n=n.nextSibling):n=n.nextSibling;return e}};return t.xmlJsonClass=n,n});
//# sourceMappingURL=jsonxml.js.map