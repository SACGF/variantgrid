/**
 * @license Copyright (c) 2014-2017, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2014-11-13, 2015-04-06
 * see https://github.com/tonytomov/jqGrid/issues/650 for more details
 */
!function(e,i){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.contextmenu-ui","free-jqgrid/grid.base"],function(n){return i(n,e,e.document)}):"object"==typeof module&&module.exports?module.exports=function(e,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e||window)),require("./jquery.contextmenu-ui"),require("free-jqgrid/grid.base"),i(n,e,e.document),n}:i(jQuery,e,e.document)}("undefined"!=typeof window?window:this,function(e,i,n){"use strict";e.jgrid=e.jgrid||{},e.extend(e.jgrid,{showHideColumnMenu:{adjustGridWidth:!0,viewHideDlgColumnsAsDisabled:!1,allowHideInernalColumns:!1,shrink:!1,menuStyle:{float:"left"},modifyMenuItem:function(i,n,t){e.inArray(n.name,["rn","subgrid","cb"])>=0?t.allowHideInernalColumns||i.hide():n.hidedlg&&(t.viewHideDlgColumnsAsDisabled?i.addClass("ui-state-disabled"):i.hide())}}}),e.jgrid.extend({showHideColumnMenu:function(t){var o=e.extend(!0,{},e.jgrid.showHideColumnMenu,t),c=null!=e.ui&&"string"==typeof e.ui.version?/^([0-9]+)\.([0-9]+)\.([0-9]+)$/.exec(e.ui.version):[],r=null!=c&&4===c.length&&"1"===c[1]&&c[2]<11;return this.each(function(){var t=e(this),c=function(){e(this.grid.hDiv).find(".ui-jqgrid-labels").contextmenu(function(c){var l,d,u,s,a,h,f,m=t.jqGrid("getGridParam"),p=m.colModel,g=m.colNames,C=p.length,k=m.groupHeader,b={},x={},j=e("<ul class='ui-jqgrid-showHideColumnMenu'></ul>");for(l=0;l<C;l++)b[p[l].name]=l;if(null!=k&&null!=k.groupHeaders)for(s=0,h=k.groupHeaders.length;s<h;s++)for(f=k.groupHeaders[s],a=0;a<f.numberOfColumns;a++)l=b[f.startColumnName]+a,d=p[l],x[l]=e.isFunction(o.buildItemText)?o.buildItemText.call(t[0],{iCol:l,cm:d,cmName:d.name,colName:g[l],groupTitleText:f.titleText}):e.jgrid.stripHtml(f.titleText)+": "+e.jgrid.stripHtml(""===g[l]?d.name:g[l]);for(l=0;l<C;l++)void 0===x[l]&&(d=p[l],x[l]=e.isFunction(o.buildItemText)?o.buildItemText.call(t[0],{iCol:l,cm:d,cmName:d.name,colName:g[l],groupTitleText:null}):e.jgrid.stripHtml(g[l]));for(l=0;l<C;l++)d=p[l],u=e("<li></li>").data("iCol",l).html(x[l]),o.modifyMenuItem.call(t[0],u,d,o),u.prepend(d.hidden?o.checkboxUnChecked:o.checkboxChecked),r&&u.wrapInner("<a></a>"),u.appendTo(j);return j.css(o.menuStyle),e("ul.ui-jqgrid-showHideColumnMenu").menu("destroy").remove(),j.appendTo("body").menu({select:function(i,n){var c=parseInt(n.item.data("iCol"),10),r=n.item.find(o.checkboxSelector),l=p[c],d=o.isChecked.call(t[0],r,i,l);!isNaN(c)&&c>=0&&null!=l&&r.length>0&&(d?(o.toUnCheck.call(t[0],r,i,l),t.jqGrid("hideCol",l.name)):(o.toCheck.call(t[0],r,i,l),t.jqGrid("showCol",l.name)),e(this).parent().css("zoom",1),j.menu("focus",i,n.item))},create:function(){var e=j.height(),t=i.innerHeight||n.documentElement.clientHeight;e>t&&j.height(t).css("overflow-y","scroll")}}).mouseleave(function(){e(this).menu("destroy").remove()}).position({of:e(c.target),my:"left top",at:"right center",collision:"flipfit flipfit"}),!1})};o=e.extend(!0,"fontAwesome"===this.p.iconSet||"fontAwesome"===o.iconSet?{checkboxChecked:'<i class="fa fa-check-square-o fa-fw fa-lg"></i>&nbsp;',checkboxUnChecked:'<i class="fa fa-square-o fa-fw fa-lg"></i>&nbsp;',checkboxSelector:"i.fa",isChecked:function(e){return e.hasClass("fa-check-square-o")},toCheck:function(e){e.removeClass("fa-square-o").addClass("fa-check-square-o")},toUnCheck:function(e){e.removeClass("fa-check-square-o").addClass("fa-square-o")}}:{checkboxChecked:'<input disabled="disabled" checked="checked" type="checkbox"/>',checkboxUnChecked:'<input disabled="disabled" type="checkbox"/>',checkboxSelector:"input[type=checkbox]",isChecked:function(e){return e.is(":checked")},toCheck:function(e){e.prop("checked",!0)},toUnCheck:function(e){e.prop("checked",!1)}},o),c.call(this),t.bind("jqGridAfterSetGroupHeaders",function(){c.call(this)})})}})});
//# sourceMappingURL=jquery.jqgrid.showhidecolumnmenu.js.map