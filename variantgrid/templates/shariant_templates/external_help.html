<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
{% load static %}
{% load i18n %}
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>{% block title %}{{ site_name }}{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
    <link href="{% static 'js/lib/jquery-ui-1.12.1.custom/jquery-ui.min.css' %}" rel="stylesheet">
    <script type="text/javascript" src="{% static 'js/lib/jquery-3.3.1/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/lib/jquery-ui.min.js' %}"></script>
    <!-- layout must be after jquery-ui or resize doesn't work -->
    <script type="text/javascript" src="{% static 'js/lib/jquery-3.3.1/jquery.layout-1.4.4.js' %}"></script>
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}" />
    <script type="text/javascript">
        $(document).ready(function () {
        {% block jsdocumentready %}
            $("button").button();
        {% endblock %}
        });
    </script>
    <script src="/static/help/help_menu.js"></script>
    <script>
        var DEFAULT_PAGE = 'about.html';
    
        function getQueryParams() {
            qs = document.location.search;
            qs = qs.split('+').join(' ');
        
            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;
        
            while (tokens = re.exec(qs)) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
            }
        
            return params;
        }

        // There are 2 copies of this function, here and internal page.
        function helpPage(pageName) {
            var static_iframe = $("iframe#static-iframe");
            var static_iframe_url = "/static/help/" + pageName;
            static_iframe.attr("src", static_iframe_url);
        } 


        $(document).ready(function() {
            var menu = $('ul#help-side-menu');
            var baseUrl = window.location.pathname + "?page=";
            populateSideMenu(baseUrl, menu);

            args = getQueryParams();
            var pageName = args["page"] || DEFAULT_PAGE;
            if (pageName) {
                helpPage(pageName);
            }
        }); 
    </script>
    <link href="{% static 'css/global.css' %}" rel="stylesheet">
    <style>
    #outer-container {
        height: 100%;
        flex-direction: column;
    }

    #login-table {
        margin-top: 10px;
    }
    
    .submenu {
        width: 140px;
    }
    .submenu li a {
        padding: 16px 4px 16px 16px;
        display: inline-block;
        width: calc(100% - 16px);
        text-decoration: none;
    }
    .submenu a:hover {
        background-color: rgba(0,0,0,0.1);
    }
    #page-container {
        min-height: calc(100vh - 48px);
    }
    #link-front-page {
        color: white;
        position: absolute;
        top: 16px;
        right:20px;
        text-align: center;
        font-size: 16px;
    }
    #static-content {
        padding: 16px;
    }
    #help-side-menu {
        padding-left: 0;
        list-style: none;
    }
    #static-iframe {
        width:100%;
    }
    
    </style>
    {% block styles %}{% endblock %}
    <!-- head block -->
    {% block head %}{% endblock %}
    <!-- /head block -->
    <link href="{% static 'css/branding.css' %}" rel="stylesheet">
</head>
<body class="ui-layout-container">
    <div id="siteMenuBar" class="ui-widget ui-layout-north ui-layout-pane ui-layout-pane-north">
       
        <div id="menuContainer" class="menu ui-widget-header">
            <a href="/"><div id='menu-logo'></div></a>
            <a id="link-front-page" href="/">Back</a>
            </div>
        </div>
    </div>
    <div id="second-level-menu-container">
        <div id="submenu_page_content" class="ui-layout-center">
             <div id='page-container' class='display-flex'>
                <div class="submenu ui-widget-header flex-none">
                    <ul id='help-side-menu'>
                        <li><a target="_blank" href="{{ help_url }}">Help</a>
                    </ul>
                </div>
                <div id="submenu_page_content" class='flex-grow'>
                    <div id="static-content">
                
                    <iframe id='static-iframe' scrolling="no" frameBorder="0" onload="this.height=this.contentDocument.body.scrollHeight +'px';">
                    </iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>