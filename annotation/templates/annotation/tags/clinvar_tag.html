{% load clinvar_tags %}
{% load ui_utils %}
{% load js_tags %}
<div class="card">
    <div class="card-header">ClinVar</div>
    <div class="card-body">
        {% if clinvar %}
            {% labelled label="ClinVar Variation ID" %}
                <a class='hover-link' target='_blank' href='https://www.ncbi.nlm.nih.gov/clinvar/variation/{{ clinvar.clinvar_variation_id }}'>{{ clinvar.clinvar_variation_id }}</a>
            {% endlabelled %}
            {% labelled label="Highest Pathogenicity" %}{{ clinvar.highest_pathogenicity }}{% endlabelled %}
            {% labelled label="Clinical Significance" %}{{ clinvar.clinical_significance }}{% endlabelled %}
            {% if clinvar.conflicting_clinical_significance %}
                {% labelled label="Conflicting Clinical Significance" %}{{ clinvar.conflicting_clinical_significance }}{% endlabelled %}
            {% endif %}
            {% labelled label="Preferred Disease Name" %}{{ clinvar.clinvar_preferred_disease_name }}{% endlabelled %}
            {% labelled label="Disease Database Name" %}{{ clinvar.clinvar_disease_database_name }}{% endlabelled %}
            {% labelled label="Review status" %}
                <a class='hover-link' target="_blank" href="https://www.ncbi.nlm.nih.gov/clinvar/docs/review_status/">
                {% clinvar_stars clinvar.stars %} {{ clinvar.get_clinvar_review_status_display }}
                </a>
            {% endlabelled %}
            {% labelled label="Clinical Sources" %}{{ clinvar.clinvar_clinical_sources }}{% endlabelled %}
            {% labelled label="Origin" %}{{ clinvar.get_origin_display }}{% endlabelled %}
            {% if clinvar_suspect_reason_code %}
                {% labelled label="Suspect Reason Code" %}{{ clinvar.get_suspect_reason_code_display }}{% endlabelled %}
            {% endif %}
            {% labelled label="Drug Response" %}{{ clinvar.drug_response }}{% endlabelled %}
            {% labelled label="Citations" %}
                {% if num_clinvar_citations %}<a class='toggle-link' data-toggle="collapse" href='#clinvar-citation-div'>Show {{ num_clinvar_citations }} Literature Citations</a>
                {% else %}No Citations.
                {% endif %}
            {% endlabelled %}
            {% labelled label="JSON" %}
                {% modal label="API Response" admin_only=True %}
                    {% code_json clinvar.fetch_json_summary css_class="modal-body" %}
                {% endmodal %}
            {% endlabelled %}
            <div id="clinvar-citation-div" class="collapse">
                {% for citation_id in clinvar_citations %}
                <div data-citation-id="{{ citation_id }}"></div>
                {% endfor %}
            </div>
        {% else %}
            No ClinVar entry (version: {{ annotation_version.clinvar_version.annotation_date.date  }})
            <a href="https://www.ncbi.nlm.nih.gov/clinvar/?term={{ g_hgvs }}">Search ClinVar</a>
        {% endif %}
    </div>
</div>