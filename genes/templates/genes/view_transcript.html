{% extends "uicore/page/base.html" %}
{% load crispy_forms_field %}
{% load ui_help %}
{% load ui_utils %}
{% load ui_menu_bars %}
{% block title %}Transcript: {{ transcript }}{% endblock title %}
{% block submenu %}{% menu_bar_data %}{% endblock %}

{% block content %}
    <style>
        #hgvs-resolution-table {
            margin-top: 50px;
        }
    </style>

    <div class="container">
        <h3>Transcript: {{ transcript }}</h3>

        {% if transcript.annotation_consortium == 'R' %}
            {% page_help 'genes/transcript_version_refseq' 'RefSeq Transcript Versions' %}
        {% elif transcript.annotation_consortium == 'E' %}
            {% page_help 'genes/transcript_version_ensembl' 'Ensembl Transcript Versions' %}
        {% endif %}

        <table class="table">
            <thead>
                <tr>
                    <th></th>
                    {% for genome_build in genome_builds %}
                        <th>{{ genome_build }} length</th>
                    {% endfor %}
                </tr>
                <tr>
                    <th>Gene</th>
                    {% for genes in build_genes %}
                        <td>
                            {% for g in genes %}
                                <a class="hover-link" href="{% url 'view_gene' g.pk %}">{{ g }}</a>
                            {% endfor %}
                        </td>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for version_data in transcript_version_lengths %}
                    <tr>
                        {% for d in version_data %}
                            {% if forloop.first %}
                                <td><a class="hover-link" href="{% url 'view_transcript_version' transcript.pk d %}">Version {{ identifier }}.{{ d }}</a></td>
                            {% else %}
                                <td>{{ d.length | default_if_none:"Unknown" }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>


        <table id="hgvs-resolution-table" class="table">
            <thead>
                <tr>
                    <th></th>
                    {% for genome_build in genome_builds %}
                        <th>{{ genome_build }} HGVS transcript version & method</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for hgvs_row in transcript_version_hgvs_methods %}
                    <tr>
                        {% for d in hgvs_row %}
                            {% if forloop.first %}
                                <td><a class="hover-link" href="{% url 'view_transcript_version' transcript.pk d %}">Version {{ identifier }}.{{ d }}</a></td>
                            {% else %}
                                <td>
                                    {% for tv, method in d %}
                                        <div>
                                        {{ tv }} using {{ method }}
                                        </div>
                                    {% endfor %}
                                </td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>




    </div>
{% endblock content %}